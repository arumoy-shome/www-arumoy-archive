<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Arumoy Shome" />
  <title>There and Back Again A Tale of Website Management</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    div.abstract {
      margin: 2em 2em 2em 2em;
      text-align: left;
      font-size: 85%;
    }
    div.abstract-title {
      font-weight: bold;
      text-align: center;
      padding: 0;
      margin-bottom: 0.5em;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap');

    body {
      font-family: "Source Code Pro", monospace;
      color: #566b78;
    }

    h1,h2,strong {
      color: #333;
    }

    code {
      vertical-align: text-bottom;
    }

    pre {
      padding: 1em;
      border-left: 2px solid #69c;
    }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">There and Back Again A Tale of Website Management</h1>
<p class="author">Arumoy Shome</p>
<p class="date">2022-03-04 Fri 22:48</p>
</header>
<p>After years of using <a href="https://orgmode.org">orgmode</a> along
with the <a
href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">org-publish</a>
package to run my website, I came back to markdown, shell &amp; vim.</p>
<p>In my humble shell dwelling days—before I began my journey into Emacs
land—I was using <a href="https://jekyllrb.com/">Jekyll</a>. Rather, I
was fighting with it. Github requires a <code>CNAME</code> file in the
directory from which the website should be served. Now, the
<code>github-pages</code> gem can be used to instruct Github Pages (GHP)
to automatically build and serve the website. But I faced several
challenges getting the compatible versions of the
<code>github-pages</code>, <code>jekyll</code> and <code>ruby</code> to
match.</p>
<p>I decided to forgo this madness and just use html &amp; css to build
my website. I used org-publish to accomplish this using the following
setup in my <code>init.el</code>.</p>
<pre class="elisp"><code>(setq org-publish-project-alist
 &#39;((&quot;org&quot; :components (&quot;org-posts&quot; &quot;org-static&quot;))
   (&quot;website-posts&quot;
    :base-directory &quot;~/code/arumoy&quot;
    :base-extension &quot;org&quot;
    :publishing-directory &quot;~/code/arumoy/docs/&quot;
    :section-numbers nil
    :auto-preamble t
    :auto-sitemap t
    :html-head &quot;&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;assets/css/main.css\&quot; type=\&quot;text/css\&quot;/&gt;&quot;
    :publishing-function org-html-publish-to-html)
   (&quot;website-static&quot;
    :base-directory &quot;~/code/arumoy/assets&quot;
    :base-extension &quot;css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf&quot;
    :publishing-directory &quot;~/code/arumoy/docs/assets/&quot;
    :recursive t
    :publishing-function org-publish-attachment)
   (&quot;website-cname&quot;
    :base-directory &quot;~/code/arumoy/&quot;
    :base-extension &quot;&quot;
    :publishing-directory &quot;~/code/arumoy/docs/&quot;
    :include (&quot;CNAME&quot;)
    :publishing-function org-publish-attachment)
   (&quot;website&quot; :components (&quot;website-posts&quot; &quot;website-static&quot; &quot;website-cname&quot;))))</code></pre>
<p>Since org-publish wipes the <code>:publishing-directory</code> clean
prior to each build, I copy the <code>CNAME</code> file back in
there.</p>
<p>I was very pleased with its simplicity and its text-centric nature.
The fact that it just worked out of the box was a pleasant surprise.
However this intricate setup only worked in Emacs and this did not sit
well with me. So I decided to find a more universal solution and landed
on <a href="https://pandoc.org/">Pandoc</a>.</p>
<p>Pandoc has the <code>--standalone</code> flag which produces a
document which is valid on its own (think HTML documents with header and
footer). One can write custom templates to produce documents styled to
their liking. The default template can be viewed using
<code>pandoc -R FORMAT</code>. A custom template can be specified using
the <code>--template</code> flag. See <a
href="https://pandoc.org/MANUAL.html#templates">section on templates</a>
in the pandoc manual for more info.</p>
<p>Following the advice laid out by <a
href="Web%20design%20in%204%20minutes">https://jgthms.com/web-design-in-4-minutes/</a>,
I designed a minimal pandoc custom template which you can find my in <a
href="https://github.com/arumoy-shome/dotfiles">dotfiles</a> repo.</p>
<p>My current workflow comprises of authoring content in markdown which
I edit in vim. I use GNU make to automate the html generation using
pandoc. The contents of my Makefile are as follows.</p>
<pre class="make"><code># Taken from &lt;https://gist.github.com/kristopherjohnson/7466917&gt;

SRCFILES:= $(wildcard *.md)
PUBFILES=$(SRCFILES:.md=.html)

%.html: %.md
    pandoc --template=public -o docs/$@ $&lt;

# Targets and dependencies

.PHONY: all clean

all : $(PUBFILES)

clean:
    rm $(PUBFILES)</code></pre>
</body>
</html>
